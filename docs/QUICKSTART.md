# VersesLab Quick Start Guide

## Getting Started

### 1. Project Setup
```bash
# Create a new Next.js project
npx create-next-app@latest dynamic-content-system --typescript --tailwind --app
cd dynamic-content-system
```

### 2. Install Dependencies
```bash
# Install core dependencies
npm install contentlayer@0.3.4 next-contentlayer@0.3.4 date-fns

# Install Tailwind CSS typography plugin
npm install -D @tailwindcss/typography
```

### 3. Create Basic Structure

Run the following commands to set up the project structure:

```bash
# Create content directories
mkdir -p src/content/posts

# Create app route directories
mkdir -p src/app/posts/[slug]
```

### 4. Configuration Steps

1. **Configure Tailwind CSS**
   Create or update `tailwind.config.js`:
   ```javascript
   /** @type {import('tailwindcss').Config} */
   module.exports = {
     content: [
       './src/pages/**/*.{js,ts,jsx,tsx,mdx}',
       './src/components/**/*.{js,ts,jsx,tsx,mdx}',
       './src/app/**/*.{js,ts,jsx,tsx,mdx}',
     ],
     darkMode: 'media',
     theme: {
       extend: {
         typography: {
           DEFAULT: {
             css: {
               color: 'var(--foreground)',
               a: {
                 color: 'var(--foreground)',
                 '&:hover': {
                   color: 'var(--foreground)',
                 },
               },
             },
           },
         },
       },
     },
     plugins: [
       require('@tailwindcss/typography'),
     ],
   }
   ```

2. **Configure PostCSS**
   Create `postcss.config.js`:
   ```javascript
   module.exports = {
     plugins: {
       tailwindcss: {},
       autoprefixer: {},
     },
   }
   ```

3. **Set up globals.css**
   Update `src/app/globals.css`:
   ```css
   @tailwind base;
   @tailwind components;
   @tailwind utilities;

   :root {
     --background: #ffffff;
     --foreground: #171717;
   }

   @media (prefers-color-scheme: dark) {
     :root {
       --background: #0a0a0a;
       --foreground: #ededed;
     }
   }

   body {
     background: var(--background);
     color: var(--foreground);
   }
   ```

4. **Configure ContentLayer**
   Create `contentlayer.config.js` (not .ts) in the root:
   ```javascript
   const { defineDocumentType, makeSource } = require('contentlayer/source-files')

   const Post = defineDocumentType(() => ({
     name: 'Post',
     filePathPattern: `**/*.md`,
     fields: {
       title: { type: 'string', required: true },
       date: { type: 'date', required: true },
     },
     computedFields: {
       slug: {
         type: 'string',
         resolve: (post) => post._raw.flattenedPath,
       },
       url: { 
         type: 'string', 
         resolve: (post) => `/posts/${post._raw.flattenedPath}`
       },
     },
   }))

   module.exports = makeSource({ 
     contentDirPath: 'src/content/posts',
     documentTypes: [Post]
   })
   ```

5. **Configure Next.js**
   Create `next.config.js`:
   ```javascript
   const { withContentlayer } = require('next-contentlayer')

   /** @type {import('next').NextConfig} */
   const nextConfig = {
     reactStrictMode: true,
     swcMinify: true,
   }

   module.exports = withContentlayer(nextConfig)
   ```

6. **Update Root Layout**
   Update `src/app/layout.tsx`:
   ```typescript
   import type { Metadata } from "next";
   import { Inter } from "next/font/google";
   import "./globals.css";

   const inter = Inter({
     subsets: ["latin"],
     display: 'swap',
   });

   export const metadata: Metadata = {
     title: "Create Next App",
     description: "Generated by create next app",
   };

   export default function RootLayout({
     children,
   }: Readonly<{
     children: React.ReactNode;
   }>) {
     return (
       <html lang="en">
         <body className={`${inter.className} antialiased`}>
           {children}
         </body>
       </html>
     );
   }
   ```

7. **Create Home Page**
   Update `src/app/page.tsx`:
   ```typescript
   import Link from 'next/link'
   import { compareDesc, format, parseISO } from 'date-fns'
   import { allPosts, Post } from 'contentlayer/generated'

   function PostCard(post: Post) {
     return (
       <div className="mb-8">
         <h2 className="mb-1 text-xl font-bold">
           <Link
             href={post.url}
             className="text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-200"
           >
             {post.title}
           </Link>
         </h2>
         <time dateTime={post.date} className="mb-2 block text-xs text-gray-600 dark:text-gray-400">
           {format(parseISO(post.date), 'LLLL d, yyyy')}
         </time>
         <div className="prose dark:prose-invert prose-sm [&>*]:mb-3 [&>*:last-child]:mb-0"
           dangerouslySetInnerHTML={{ __html: post.body.html }}
         />
       </div>
     )
   }

   export default function Home() {
     const posts = allPosts.sort((a: Post, b: Post) => compareDesc(new Date(a.date), new Date(b.date)))

     return (
       <div className="mx-auto max-w-xl py-8 px-4">
         <h1 className="mb-8 text-center text-2xl font-bold">Next.js + Contentlayer Example</h1>
         {posts.map((post, idx) => (
           <PostCard key={idx} {...post} />
         ))}
       </div>
     )
   }
   ```

8. **Create Post Page**
   Create `src/app/posts/[slug]/page.tsx`:
   ```typescript
   import { allPosts, Post } from 'contentlayer/generated'
   import { notFound } from 'next/navigation'

   interface PostPageProps {
       params: {
           slug: string
       }
   }

   export async function generateStaticParams() {
       return allPosts.map((post: Post) => ({
           slug: post.slug,
       }))
   }

   export default function PostPage({ params }: PostPageProps) {
       const post = allPosts.find((post: Post) => post.slug === params.slug)

       if (!post) {
           notFound()
       }

       return (
           <article className="mx-auto max-w-xl py-8">
               <div className="mb-8 text-center">
                   <h1 className="text-3xl font-bold">{post.title}</h1>
                   <time dateTime={post.date} className="text-sm text-gray-500">
                       {new Date(post.date).toLocaleDateString('en-US', {
                           year: 'numeric',
                           month: 'long',
                           day: 'numeric',
                       })}
                   </time>
               </div>
               <div className="prose dark:prose-invert" dangerouslySetInnerHTML={{ __html: post.body.html }} />
           </article>
       )
   }
   ```

### 5. Common Issues and Solutions

1. **Next.js Configuration Error**
   - Issue: "Configuring Next.js via 'next.config.ts' is not supported"
   - Solution: Use `next.config.js` instead of `next.config.ts`

2. **Font Loading Error**
   - Issue: "Unknown font `Geist`"
   - Solution: Use `Inter` or another Google Font instead:
   ```typescript
   import { Inter } from "next/font/google";
   const inter = Inter({ subsets: ["latin"], display: 'swap' });
   ```

3. **Tailwind Styles Not Applied**
   - Make sure all configuration files are in place (tailwind.config.js, postcss.config.js)
   - Verify globals.css has the proper @tailwind directives
   - Clear cache and restart the server:
   ```bash
   rm -rf .next .contentlayer
   npm run dev
   ```

4. **Content Not Loading**
   - Clear `.next` and `.contentlayer` directories
   - Restart development server
   ```bash
   rm -rf .next .contentlayer
   npm run dev
   ```

### 6. Development Workflow

1. **Start Development Server**
```bash
npm run dev
```

2. **Create Content**
Add `.md` files to `src/content/posts` with required frontmatter:
```markdown
---
title: My First Post
date: 2024-03-19
---

Your content here...
```

### 7. Next Steps

1. **Add More Features**
   - Implement search functionality
   - Add categories and tags
   - Create an index page for all posts

2. **Customize Styling**
   - Modify Tailwind configuration
   - Add custom components
   - Implement dark mode

3. **Optimize Performance**
   - Add image optimization
   - Implement caching
   - Configure metadata

### 8. Resources

- [Next.js Documentation](https://nextjs.org/docs)
- [ContentLayer Documentation](https://contentlayer.dev/)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs) 